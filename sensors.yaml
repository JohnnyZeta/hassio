
  - platform: etherscan
    address: !secret eth_address
    name: "Saldo ETH"
###############################################################################
  - platform: template
    sensors:
     tp_link_amps:
       value_template: "{{ states.switch.nuvola.attributes.current_a }}"
       friendly_name: "Consumo attuale"
       unit_of_measurement: 'A'
     tp_link_watts:
       value_template: "{{states.switch.nuvola.attributes.current_power_w }}"
       unit_of_measurement: 'W'
       friendly_name: "Potenza attuale"
     tp_link_kw:
       value_template: "{{ states.switch.nuvola.attributes.total_energy_kwh }}"
       unit_of_measurement: 'kW'
       friendly_name: "Consumo totale"
     tp_link_kw_today:
       value_template: "{{ states.switch.nuvola.attributes.today_energy_kwh }}"
       unit_of_measurement: 'kW'
       friendly_name: "Consumo giornaliero"
     tp_link_volts:
       value_template: "{{ states.switch.nuvola.attributes.voltage }}"
       unit_of_measurement: 'V'
       friendly_name: "Voltaggio"
     tap_remote:
       value_template: >
         {% if is_state('sensor.tap_button', '34') %}
           1
         {% elif is_state('sensor.tap_button', '16') %}
           2
         {% elif is_state('sensor.tap_button', '17') %}
           3
         {% elif is_state('sensor.tap_button', '18') %}
           4
         {% else %}
           failed
         {% endif %}
       icon_template: >
         {% if is_state('sensor.tap_button', '34') %}
           mdi:numeric-1-box
         {% elif is_state('sensor.tap_button', '16') %}
           mdi:numeric-2-box
         {% elif is_state('sensor.tap_button', '17') %}
           mdi:numeric-3-box
         {% elif is_state('sensor.tap_button', '18') %}
           mdi:numeric-4-box
         {% else %}
           mdi:message-alert
         {% endif %}
       friendly_name: "Telecomando Hue Tap"
#  - platform: transmission
#    host: 192.168.2.15
#    name: "Transmission"
#    username: "transmission"
#    password: "transmission"
#    monitored_variables:
#      - 'current_status'
#      - 'download_speed'
#      - 'upload_speed'
#      - 'active_torrents'
###############################################################################
  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /home
      - type: memory_free
      - type: network_in
        arg: eth0
      - type: network_out
        arg: eth0
###############################################################################
  - platform: uptime
    name: Tempo Online
###############################################################################
  - platform: speedtest
    server_id: 4564
    monitored_conditions:
      - ping
      - download
      - upload
###############################################################################
  - platform: darksky
    api_key: !secret darksky_key
    forecast: 1
    monitored_conditions:
      - summary
      - apparent_temperature
      - wind_speed
      - cloud_cover
###############################################################################
  - platform: google_travel_time
    name: Lavoro-Casa Ale
    api_key: !secret google_key
    origin: zone.lavoro_2
    destination: zone.home
  - platform: google_travel_time
    name: Lavoro-Casa Alby
    api_key: !secret google_key
    origin: zone.lavoro
    destination: zone.home
  - platform: google_travel_time
    name: Ale Casa-Lavoro
    api_key: !secret google_key
    origin: zone.home
    destination: zone.lavoro_2
  - platform: google_travel_time
    name: Alby Casa-Lavoro
    api_key: !secret google_key
    origin: zone.home
    destination: zone.lavoro
  # - platform: google_travel_time
  #   name: Ale-Casa
  #   api_key: !secret google_key
  #   origin: device_tracker.iphone_di_alessandra
  #   destination: zone.home
  # - platform: google_travel_time
  #   name: Alby-Casa
  #   api_key: !secret google_key
  #   origin: device_tracker.iphone_di_alby
  #   destination: zone.home
###############################################################################
  - platform: rest
    resource: http://ip.jsontest.com
    name: IP Esterno
    value_template: '{{ value_json.ip }}'
#  TAP_BUTTONS = {34: '1_click', 16: '2_click', 17: '3_click', 18: '4_click'}
  - platform: rest
    resource: http://192.168.2.5/api/UQ7QJsuqUN4VXEOvVOUHzKuuxfGJPJYWEQAW1VxE/sensors/2
    name: Tap Button
    value_template: '{{ value_json.state.buttonevent }}'
    scan_interval: 1
  - platform: rest
    resource: http://192.168.2.5/api/UQ7QJsuqUN4VXEOvVOUHzKuuxfGJPJYWEQAW1VxE/sensors/2
    name: Tap Update
    value_template: '{{ value_json.state.lastupdated }}'
    scan_interval: 1
