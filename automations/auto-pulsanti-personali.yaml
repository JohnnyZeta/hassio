
########## PULSANTE ALBY ######################################################

# 1 CLICK
  - alias: Pulsante_Nanna_Alby_Buio
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d00016c48b3
        click_type: single
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sun.sun
          state: 'below_horizon'
        - condition: or
          conditions:
            - condition: state
              entity_id: light.tv
              state: 'on'
            - condition: state
              entity_id: light.camera
              state: 'off'
            - condition: template
              value_template: '{{ states.light.camera_2.attributes.brightness == 103 }}'
    action:
      - service: light.turn_off
        data:
          entity_id: light.yeelight_ceiling_7811dcda769e
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "Nanna"

  - alias: Annulla_Pulsante_Nanna_Alby_Buio
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d00016c48b3
        click_type: single
    condition:
      condition: or
      conditions:
        - condition: state
          entity_id: sun.sun
          state: 'above_horizon'
        - condition: template
          value_template: '{{ states.light.camera_2.attributes.brightness == 179 }}'
    action:
      service: hue.hue_activate_scene
      data:
        group_name: "Camera"
        scene_name: "Tenue"

# 2 CLICK
  - alias: Pulsante_Scena_Nanna_Alby
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d00016c48b3
        click_type: double
    condition:
      - condition: state
        entity_id: sun.sun
        state: 'below_horizon'
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "Nanna"
      - service: shell_command.spegni_nanna
      # - delay: 00:03:00
      # - service: switch.turn_off
      #   entity_id: switch.nuvola

# HOLD CLICK
  - alias: Pulsante_SOS_Alby
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d00016c48b3
        click_type: hold
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "SOS"
      - service: automation.trigger
        data:
          entity_id: automation.pulsante_plafoniera_camera_max
      - service: notify.telefoni
        data_template:
          title: "SOS!"
          message: "SOS dal comodino di Alberto!"

########## PULSANTE ALE #######################################################

# 1 CLICK
  - alias: Pulsante_Nanna_Ale_Buio
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d000120ea9c
        click_type: single
    condition:
      condition: and
      conditions:
        - condition: state
          entity_id: sun.sun
          state: 'below_horizon'
        - condition: or
          conditions:
            - condition: state
              entity_id: light.tv
              state: 'on'
            - condition: state
              entity_id: light.camera
              state: 'off'
            - condition: template
              value_template: '{{ states.light.camera_2.attributes.brightness == 103 }}'
    action:
      - service: light.turn_off
        data:
          entity_id: light.yeelight_ceiling_7811dcda769e
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "Nanna"

  - alias: Annulla_Pulsante_Nanna_Ale_Buio
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d000120ea9c
        click_type: single
    condition:
      condition: or
      conditions:
        - condition: state
          entity_id: sun.sun
          state: 'above_horizon'
        - condition: template
          value_template: '{{ states.light.camera_2.attributes.brightness == 179 }}'
    action:
      service: hue.hue_activate_scene
      data:
        group_name: "Camera"
        scene_name: "Tenue"

# 2 CLICK
  - alias: Pulsante_Scena_Nanna_Ale
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d000120ea9c
        click_type: double
    condition:
      - condition: state
        entity_id: sun.sun
        state: 'below_horizon'
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "Nanna"
      - service: shell_command.spegni_nanna
      # - delay: 00:03:00
      # - service: switch.turn_off
      #   entity_id: switch.nuvola

# HOLD CLICK
  - alias: Pulsante_SOS_Ale
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.switch_158d000120ea9c
        click_type: hold
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "SOS"
      - service: automation.trigger
        data:
          entity_id: automation.pulsante_plafoniera_camera_max
      - service: notify.telefoni
        data_template:
          title: "SOS!"
          message: "SOS dal comodino di Alessandra!"
      - service: notify.telegram
        data_template:
          message: "SOS dal comodino di Alessandra!"
