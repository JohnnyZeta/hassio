
########## PULSANTE LIBRERIA ###################################################

# 1 CLICK
  - alias: Pulsante_Netflix
    trigger:
      platform: event
      event_type: deconz_event
      event_data:
        id: xiaomi_switch_b
        event: 1000
    action:
      - service: scene.turn_on
        data_template:
          entity_id: >
            {% if (states.light.tv_2.state == "off") or (state_attr("light.tv_2", "brightness") > 250) or (states.light.tv_2.state == "unavailable") %} scene.netflix
            {% else %} scene.tvoff
            {% endif %}
      - service_template: >
          {% if (states.light.tv_2.state == "off") or (state_attr("light.tv_2", "brightness") > 250) or (states.light.tv_2.state == "unavailable") %}
            switch.turn_on
          {% else %}
            switch.turn_off
          {% endif %}
        data:
          entity_id: switch.natalino

########## PULSANTE JBL ########################################################

# 1 CLICK
  - alias: Pulsante Luci Salone ON
    trigger:
      platform: event
      event_type: deconz_event
      event_data:
        id: xiaomi_switch_c
        event: 1000
    condition:
      condition: state
      entity_id: light.tv_2
      state: 'off'
    action:
      - service: light.turn_on
        data:
          entity_id: light.divano_2, light.tv_2
          brightness: 254
          xy_color: [0.432, 0.402]
  
  - alias: Pulsante Luci Salone OFF
    trigger:
      platform: event
      event_type: deconz_event
      event_data:
        id: xiaomi_switch_c
        event: 1000
    condition:
      condition: state
      entity_id: light.tv_2
      state: 'on'
    action:
      - service: light.turn_off
        data:
          entity_id: light.divano_2, light.tv_2


# 2 CLICK
  # - alias: Pulsante Luci Salotto OFF
  #   trigger:
  #     platform: event
  #     event_type: deconz_event
  #     event_data:
  #       id: xiaomi_switch_c
  #       event: 1004
  #   action:
  #     - service: light.turn_off
  #       data:
  #         entity_id: light.divano_2, light.tv_2