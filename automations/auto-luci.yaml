
  - alias: Arrivo a Casa
    trigger:
      platform: state
      entity_id: group.famiglia
      to: 'home'
    condition:
      - condition: time
        after: '13:00:00'
      - condition: state
        entity_id: light.cucina_2
        state: 'off'
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Casa"
          scene_name: "Entrata"

###############################################################################

  # - alias: Luce Serale
  #   trigger:
  #     platform: sun
  #     # Possible values: sunset, sunrise
  #     event: sunset
  #     # Optional time offset. This example is 45 minutes.
  #     offset: '-00:30:00'
  #   condition:
  #     condition: state
  #     entity_id: group.famiglia
  #     state: home
  #   action:
  #     - service: hue.hue_activate_scene
  #       data:
  #         group_name: "Casa"
  #         scene_name: "Arrivo"

###############################################################################
#  - alias: Luce Serale
#    trigger:
#      - platform: zone
#        entity_id: group.famiglia
#        zone: zone.home
#        event: enter
#      - platform: sun
#        # Possible values: sunset, sunrise
#        event: sunset
#        # Optional time offset. This example is 45 minutes.
#        offset: '-00:30:00'
#    condition:
#      condition: state
#      entity_id: group.famiglia
#      state: home
#    action:
#      - service: hue.hue_activate_scene
#        data:
#          group_name: "Casa"
#          scene_name: "Arrivo"
###############################################################################

  - alias: Buongiorno Lavorativo
    trigger:
      platform: time
      minutes: '/1'
      seconds: 0
    condition:
      - condition: state
        entity_id: input_boolean.alarmweekon
        state: 'on'
      - condition: state
        entity_id: input_boolean.alarmweekday
        state: 'on'
      - condition: time
        weekday:
          - mon
          - tue
          - wed
          - thu
          - fri
      - condition: template
        value_template: '{{ now().strftime("%H:%M:00") == states.input_datetime.alba.state }}'
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Camera"
          scene_name: "Buongiorno"
          # la transizione-on è già nella scena (5 min)

  - alias: Buongiorno Weekends
    trigger:
      platform: time
      minutes: '/1'
      seconds: 0
    condition:
      - condition: state
        entity_id: input_boolean.alarmweekon
        state: 'on'
      - condition: state
        entity_id: input_boolean.alarmweekday
        state: 'off'
      - condition: time
        weekday:
          - sat
          - sun
      - condition: template
        value_template: '{{ now().strftime("%H:%M:00") == states.input_datetime.alba.state }}'
    action:
      - service: hue.hue_activate_scene
        data:
          group_name: "Camera"
          scene_name: "Buongiorno"
          # la transizione-on è già nella scena (5 min)

###############################################################################

  - alias: Selezione Scene Casa
    trigger:
      platform: state
      entity_id: input_select.scena_hue_casa
    action:
      service: hue.hue_activate_scene
      data_template:
        group_name: "Casa"
        scene_name: >
          {% if is_state("input_select.scena_hue_casa", "Entrata") %} Entrata
          {% elif is_state("input_select.scena_hue_casa", "Nanna") %} Nanna
          {% elif is_state("input_select.scena_hue_casa", "Netflixo") %} Netflixo
          {% elif is_state("input_select.scena_hue_casa", "TVOff") %} TVOff
          {% endif %}

  - alias: Selezione Scene Salotto
    trigger:
      platform: state
      entity_id: input_select.scena_hue_salotto
    action:
      service: hue.hue_activate_scene
      data_template:
        group_name: "Salotto"
        scene_name: >
          {% if is_state("input_select.scena_hue_camera", "Serata") %} Serata
          {% elif is_state("input_select.scena_hue_camera", "Caldo") %} Caldo
          {% endif %}

  - alias: Selezione Scene Camera
    trigger:
      platform: state
      entity_id: input_select.scena_hue_camera
    action:
      service: hue.hue_activate_scene
      data_template:
        group_name: "Camera"
        scene_name: >
          {% if is_state("input_select.scena_hue_camera", "Accesa") %} Accesa
          {% elif is_state("input_select.scena_hue_camera", "Tenue") %} Tenue
          {% elif is_state("input_select.scena_hue_camera", "Rosso") %} Rosso
          {% endif %}

##############################################################################

  - alias: Tap Button Camera
    trigger:
      platform: state
      entity_id: sensor.tap_remote
      to: '1'
    action:
      service: light.turn_off
      data:
        entity_id: light.yeelight_ceiling_7811dcda769e

###############################################################################
